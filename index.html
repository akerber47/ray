<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ray</title>
    <script type="text/javascript" src="src/util.js"></script>
    <script type="text/javascript" src="src/scene.js"></script>
    <script type="text/javascript" src="src/ray.js"></script>
    <script type="text/javascript">

        function fillCanvas() {
            var canvas = document.getElementById("canvas");
            var ctx = canvas.getContext("2d");
            var maxX = canvas.width - 1;
            var maxY = canvas.height - 1;

            ctx.fillText("maxX = " + maxX, 10, 10);
            ctx.fillText("maxY = " + maxY, 30, 30);
            ctx.fillStyle = "green";
            ctx.fillRect(0, 100, 100, 100);

            const X = 800;
            const Y = 600;

            var testData = ctx.getImageData(100,0,100,100);
            var testData2 = ctx.getImageData(100,100,X,Y);
            var testImage = initTestImage();
            var testImage2 = new RawImage(X, Y);
            rayTrace(testScene(), defaultCamera(), 0, 100, 0, 100, testImage);
            rayTrace(testScene(), defaultCamera(), 0, X, 0, Y, testImage2);
            encodeImageData(testImage, 1.0, testData);
            encodeImageData(testImage2, 1.0, testData2);
            ctx.putImageData(testData,100,0);
            ctx.putImageData(testData2,100,100);

            var words = document.getElementById("words");
            words.textContent = imageDataToPpm(testData);

        }
    </script>
</head>
<body onload="fillCanvas();">

    <canvas id="canvas" style="border: 5px solid black" width="800" height="600"></canvas>

    <div id="words"></div>

</body>
</html>