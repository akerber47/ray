<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ray</title>
    <script type="text/javascript" src="src/util.js"></script>
    <script type="text/javascript" src="src/scene.js"></script>
    <script type="text/javascript" src="src/ray.js"></script>
    <script type="text/javascript">

        function fillCanvas() {
            var canvas = document.getElementById("canvas");
            var ctx = canvas.getContext("2d");
            /*
            var maxX = canvas.width - 1;
            var maxY = canvas.height - 1;

            ctx.fillText("maxX = " + maxX, 10, 10);
            ctx.fillText("maxY = " + maxY, 30, 30);
            ctx.fillStyle = "green";
            ctx.fillRect(0, 100, 100, 100);
            */

            var X = canvas.width;
            var Y = canvas.height;

            var testData = ctx.getImageData(0,0,X,Y);
            var testImage = new RawImage(X, Y);
            //rayTrace(testScene2(), defaultCamera(), 0, X, 0, Y, testImage);
            rasterize(testScene2(), defaultCamera(), 0, X, 0, Y, testImage);
            encodeImageData(testImage, 1.0, testData);
            ctx.putImageData(testData,0,0);

            // for (very tedious) pixel-by-pixel debugging
            // var words = document.getElementById("words");
            // words.textContent = imageDataToPpm(testData);

        }
    </script>
</head>
<body onload="fillCanvas();">

    <!-- <canvas id="canvas" style="border: 5px solid black" width="1000" height="700"></canvas> -->
    <canvas id="canvas" width="1200" height="750"></canvas>

    <div id="words"></div>

</body>
</html>